<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Joker's Gold Scratch - Bet30 Exclusive</title>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        :root {
            --bet-pink: #ff0055;
            --bet-gold: #ffcc00;
            --dark-overlay: rgba(0, 0, 0, 0.75);
            --neon-pink: 0 0 20px #ff0055, 0 0 40px #ff0055;
        }

        body, html {
            margin: 0; padding: 0;
            height: 100%; width: 100%;
            font-family: 'Verdana', sans-serif;
            overflow: hidden;
            background-color: #000;
        }

        /* --- VIDEO DE FONDO --- */
        #video-bg {
            position: fixed;
            right: 0; bottom: 0;
            min-width: 100%; min-height: 100%;
            z-index: -1;
            filter: blur(3px) brightness(0.6);
            object-fit: cover;
        }

        /* --- CAPA DE DISEÑO --- */
        .overlay {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle, transparent 20%, var(--dark-overlay) 80%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 1;
        }

        /* MARQUESINA DE GANADORES PROFESIONAL */
        .live-ticker {
            position: absolute;
            top: 0; width: 100%;
            background: rgba(0,0,0,0.8);
            border-bottom: 2px solid var(--bet-gold);
            padding: 8px 0;
            overflow: hidden;
            white-space: nowrap;
        }

        .ticker-move {
            display: inline-block;
            animation: ticker 25s linear infinite;
            color: #fff;
            font-weight: bold;
            font-size: 13px;
            text-transform: uppercase;
        }

        .ticker-move span { margin-right: 60px; display: inline-flex; align-items: center; gap: 8px; }
        .ticker-move b { color: var(--bet-gold); }

        @keyframes ticker { from { transform: translateX(100%); } to { transform: translateX(-100%); } }

        /* HEADER ESTILO JOKER */
        .brand-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .brand-header h1 {
            font-size: 50px;
            color: #fff;
            margin: 0;
            text-shadow: var(--neon-pink);
            letter-spacing: -2px;
            font-style: italic;
        }

        /* --- LA RASPADITA (EL PREMIO) --- */
        .scratch-wrapper {
            position: relative;
            width: 400px;
            height: 220px;
            padding: 10px;
            background: linear-gradient(145deg, #222, #000);
            border-radius: 25px;
            border: 4px solid var(--bet-gold);
            box-shadow: 0 0 50px rgba(255, 0, 85, 0.4);
        }

        .inner-prize {
            width: 100%; height: 100%;
            background: #111;
            border-radius: 15px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
            background: url('https://www.transparenttextures.com/patterns/black-linen.png');
        }

        .inner-prize h3 { color: #555; font-size: 18px; margin: 0; }
        .inner-prize .win-text { 
            color: var(--bet-gold); 
            font-size: 45px; 
            font-weight: 900; 
            display: none; 
            animation: scaleIn 0.5s ease-out;
        }

        @keyframes scaleIn { from { transform: scale(0.5); } to { transform: scale(1); } }

        #canvas {
            position: absolute;
            top: 10px; left: 10px;
            border-radius: 15px;
            z-index: 10;
            cursor: pointer;
            touch-action: none;
        }

        /* --- MODAL DE VICTORIA VIP --- */
        #vipModal {
            display: none;
            position: fixed;
            top:0; left:0; width:100%; height:100%;
            background: rgba(0,0,0,0.95);
            z-index: 9999;
            justify-content: center;
            align-items: center;
        }

        .vip-content {
            background: linear-gradient(to bottom, #1a1a1a, #000);
            padding: 60px;
            border-radius: 40px;
            border: 3px solid var(--bet-gold);
            text-align: center;
            box-shadow: 0 0 100px var(--bet-pink);
        }

        .vip-content h2 { color: var(--bet-pink); font-size: 20px; letter-spacing: 5px; margin: 0; }
        .vip-content h1 { color: #fff; font-size: 70px; margin: 10px 0; }
        .vip-content .fichas { color: var(--bet-gold); font-size: 30px; margin-bottom: 30px; }
        .vip-content button {
            background: var(--bet-gold);
            color: #000; border: none; padding: 18px 50px;
            border-radius: 10px; font-weight: 900; font-size: 18px; cursor: pointer;
            transition: 0.3s;
        }
        .vip-content button:hover { transform: scale(1.1); background: #fff; }

    </style>
</head>
<body>

    <video autoplay muted loop id="video-bg">
        <source src="https://static.videezy.com/system/resources/previews/000/038/542/original/Spinning_Slot_Machine_Reels.mp4" type="video/mp4">
    </video>

    <div class="overlay">
        
        <div class="live-ticker">
            <div class="ticker-move" id="ticker">
                </div>
        </div>

        <div class="brand-header">
            <h1>BET<span>30</span> VIP</h1>
            <p style="color: var(--bet-gold); font-weight: bold; margin-top: 5px;">EXCLUSIVE REWARDS</p>
        </div>

        <div class="scratch-wrapper">
            <div class="inner-prize">
                <h3 id="labelTry">SUERTE PRÓXIMA</h3>
                <div class="win-text" id="winValue">5.000</div>
            </div>
            <canvas id="canvas" width="400" height="220"></canvas>
        </div>

    </div>

    <div id="vipModal">
        <div class="vip-content">
            <h2>¡GANANCIA ÉPICA!</h2>
            <h1>5.000</h1>
            <div class="fichas">FICHAS NO EXTRAÍBLES</div>
            <button onclick="closeVIP()">RECLAMAR AHORA</button>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        const winValue = document.getElementById('winValue');
        const labelTry = document.getElementById('labelTry');
        const vipModal = document.getElementById('vipModal');
        const ticker = document.getElementById('ticker');

        let attempts = 0;
        let isScraping = false;

        // Generar ticker profesional
        const users = ["Santi99", "Mari_Slots", "JokerKing", "BetMaster", "Player_777"];
        ticker.innerHTML = users.map(u => `<span><i class="material-icons-outlined" style="color:var(--bet-pink)">verified</i> <b>${u}</b> ganó <b>$${Math.floor(Math.random()*5000)}</b></span>`).join('').repeat(10);

        function init() {
            // Capa de raspado con textura metálica
            const grad = ctx.createLinearGradient(0,0,400,220);
            grad.addColorStop(0, '#333');
            grad.addColorStop(0.5, '#666');
            grad.addColorStop(1, '#222');
            ctx.fillStyle = grad;
            ctx.fillRect(0,0,400,220);

            // Icono del Joker en el centro del canvas
            ctx.globalCompositeOperation = 'source-over';
            ctx.fillStyle = "rgba(255,204,0,0.3)";
            ctx.font = "bold 80px 'Material Icons Outlined'";
            ctx.textAlign = "center";
            ctx.fillText("casino", 200, 130);

            ctx.globalCompositeOperation = 'destination-out';
        }

        function handleScratch(e) {
            if(!isScraping) return;
            const rect = canvas.getBoundingClientRect();
            const x = (e.clientX || e.touches[0].clientX) - rect.left;
            const y = (e.clientY || e.touches[0].clientY) - rect.top;

            ctx.beginPath();
            ctx.arc(x, y, 30, 0, Math.PI*2);
            ctx.fill();
            checkProgress();
        }

        function checkProgress() {
            const data = ctx.getImageData(0,0,400,220).data;
            let cleared = 0;
            for(let i=3; i<data.length; i+=4) if(data[i] === 0) cleared++;
            
            if(cleared > (400*220*0.6)) {
                reveal();
            }
        }

        function reveal() {
            isScraping = false;
            attempts++;

            if(attempts === 20) {
                labelTry.style.display = 'none';
                winValue.style.display = 'block';
                // Efectos pro
                confetti({ particleCount: 200, spread: 100, origin: { y: 0.6 }, colors: ['#ff0055', '#ffcc00', '#ffffff'] });
                setTimeout(() => { vipModal.style.display = 'flex'; }, 1000);
            } else {
                setTimeout(() => {
                    alert("Inténtalo de nuevo. ¡El gran premio está cerca!");
                    reset();
                }, 500);
            }
        }

        function reset() {
            ctx.globalCompositeOperation = 'source-over';
            init();
            winValue.style.display = 'none';
            labelTry.style.display = 'block';
        }

        function closeVIP() {
            attempts = 0;
            vipModal.style.display = 'none';
            reset();
        }

        canvas.addEventListener('mousedown', () => isScraping = true);
        canvas.addEventListener('touchstart', () => isScraping = true);
        window.addEventListener('mouseup', () => isScraping = false);
        window.addEventListener('touchend', () => isScraping = false);
        canvas.addEventListener('mousemove', handleScratch);
        canvas.addEventListener('touchmove', handleScratch);

        init();
    </script>
</body>
</html>
